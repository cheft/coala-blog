<div>
  {{~data.resource :item}}
  <div class="item" data-id={{!item.id}}>
    <h1 class="title">{{!item.title}}</h1>
    <div class="content">{{!item.intro}}</div>
  </div>
  {{~}}
</div>

<script>
  var coala = require('coala')

  module.exports = {
    data: function() {
      return this.fetch()
    },

    listen: {
      update: function() {
        this.data.resource.forEach(function(item) {
          item.intro = $(item.contentHTML).text().substr(1, 200)
        })
      }
    },

    mixins: {
      fetch: function() {
        return $.ajax({
          url: '/api/blogs',
          data: {}
        })
      }
    },

    events: {
      'click .item': 'openDetail'
    },

    handle: {
      openDetail: function(e) {
        var id = $(e.currentTarget).data('id')
        coala.cr.go('/' + id)
      }  
    }
  }
</script>

<style>
  body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 980px;
    margin: 0 auto;
    padding: 45px;
  }

</style>